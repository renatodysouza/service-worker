importScripts('https://storage.googleapis.com/workbox-cdn/releases/4.3.1/workbox-sw.js');

self.skipWaiting();
if (workbox) {
    console.log(`Yay! Workbox is loaded ðŸŽ‰`);
  } else {
    console.log(`Boo! Workbox didn't load ðŸ˜¬`);
  }

  
  //Precaching
workbox.precaching.precacheAndRoute([
    { url: 'index.html', revision: '0000' },
    { url: 'style.css', revision: '0000' },
    { url: 'index.js', revision: '0000' },
]);
  //On https://ptsv2.com/t/n5y9f-1556037444 you can check for received posts
const bgSyncPlugin = new workbox.backgroundSync.Plugin('queue', {
    maxRetentionTime: 2200 // Retry for max of 24 Hours
});

workbox.routing.registerRoute(
    'http://localhost:3000/send',
    new workbox.strategies.NetworkOnly({
        plugins: [bgSyncPlugin]
    }),
    'POST'
);
  
